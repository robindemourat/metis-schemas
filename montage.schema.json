{
    "id": "montage",
    "title": "Montage",
    "description": "Montage used in plurishing",
    "$schema": "http://json-schema.org/draft-06/schema#",
    "type": "object",
    "properties":
    {
        "type": {
          "type": "string",
          "enum": ["montage"],
          "default": "montage"
        },
        "metadata": {
          "description": "metadata of the montage",
          "type": "object",
            "properties": {
              "title": {
                "type": "string",
                "description": "Title of the montage",
                "default": ""
              },
              "creators": {
                "type": "array",
                "description": "creators of the montage",
                "default": [],
                "items": {
                  "type": "object",
                  "properties": {
                    "given": {
                      "type": "string",
                      "default": ""
                    },
                    "family": {
                      "type": "string",
                      "default": ""
                    },
                    "role": {
                      "type": "string",
                      "default": ""
                    }
                  },
                  "required": ["given", "family"]
                }
              },
              "montage_type": {
                "type": "string",
                "enum": ["micropublication"],
                "default": "micropublication"
              },
              "description": {
                "type": "string",
                "default": ""
              }
            }
        },
        "data": {
          "default": {},
          "description": "data of the montage (depends on montage type)",
          "oneOfFrom": "metadata.montage_type",
          "oneOf": [
            { "$ref": "#/definitions/micropublication" }
          ]
        }
    },
    "required": ["type", "metadata", "data"],

    "definitions": {
      "micropublication": {
        "type": "object",
         "properties": {
          "target_composition_id": {
            "type": "string",
            "description": "composition to use for building the micropublication"
          },
          "include_abstract": {
            "type": "boolean",
            "default": true,
            "description": "whether to include abstract in the micropublication"
          }
         },
          "additionalProperties": false
      }
    }
}